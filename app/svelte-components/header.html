<nav>
  <div class="top-nav-section">
  	<a href="{{ data.basePath || '.' }}/" class="back-logo" title="Go back a page" on:click="goBack(event)">
      <span class="sr-only">Back</span>
    </a>

    <a href="{{ data.basePath || '.' }}/" class="middle-logo" title="Home">
      <span class="sr-only">Go to homepage</span>
    </a>

    <div class="top-nav-left">
      <div class="social-buttons social-buttons-gray">
        <a href="{{ facebookURL(data, content) }}" target="_blank" rel="noopener" class="facebook-button">
          <span class="sr-only">Share on Facebook</span>
        </a>
        <a href="{{ twitterURL(data, content) }}" target="_blank" rel="noopener" class="twitter-button">
          <span class="sr-only">Share on Twitter</span>
        </a>
        <a href="{{ emailURL(data, content) }}" target="_blank" rel="noopener" class="email-button">
          <span class="sr-only">Share via email</span>
        </a>
      </div>

      <a href="#/menu" class="menu-logo {{ fullNavOpen ? 'menu-logo-close' : '' }}" title="Menu" on:click="toggleFullNav(event)">
        <span class="sr-only">Menu</span>
      </a>
    </div>

    <h1 class="sr-only">{{ data.name || data.title || content.title }}</h1>
  </div>

  <div class="full-nav {{ fullNavOpen ? 'full-nav-open' : '' }}">
    <ul>
      {{#each groups as g}}
        <li><a href="{{ data.basePath }}/{{ g.filename }}">{{ g.title }}</a></li>
      {{/each}}
    </ul>
  </div>
</nav>

<script>
import helpers from './common/helpers.js';

export default {
  methods: {
    // Toggle the full nav
    toggleFullNav: function(e) {
      if (e && e.preventDefault) {
        e.preventDefault();
      }

      this.set({ fullNavOpen: !this.get('fullNavOpen') });
    },

    // Go back using browser
    goBack: function(e) {
      if (e && e.preventDefault) {
        e.preventDefault();
      }

      if (window.history) {
        window.history.back(-1);
      }
    }
  },

  helpers: {
    facebookURL: helpers.facebookURL,
    twitterURL: helpers.twitterURL,
    emailURL: helpers.emailURL
  },

  data() {
    return {
      isBrowser: typeof window !== undefined,
      fullNavOpen: false
    };
  }
};
</script>
